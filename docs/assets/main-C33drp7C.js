import"./base-D7JJuB-E.js";import{l as S}from"./navbar-DIDQeqOs.js";/* empty css                   */import{t as v,s as p}from"./api-BpNINWIZ.js";let l=null;function c(e,s="success"){const t=document.querySelector(".custom-toast");t&&t.remove();const n=document.createElement("div");n.className=`custom-toast toast-${s}`;const o={success:`<svg class="toast-icon" viewBox="0 0 20 20" fill="currentColor">
      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
    </svg>`,error:`<svg class="toast-icon" viewBox="0 0 20 20" fill="currentColor">
      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
    </svg>`,warning:`<svg class="toast-icon" viewBox="0 0 20 20" fill="currentColor">
      <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
    </svg>`};n.innerHTML=`
    ${o[s]}
    <span class="toast-message">${e}</span>
    <button class="toast-close" aria-label="Close">
      <svg viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
      </svg>
    </button>
  `,document.body.appendChild(n),setTimeout(()=>n.classList.add("show"),10),n.querySelector(".toast-close").addEventListener("click",()=>{n.classList.remove("show"),setTimeout(()=>n.remove(),300)}),setTimeout(()=>{n.parentElement&&(n.classList.remove("show"),setTimeout(()=>n.remove(),300))},5e3)}const w="xKnL-OvHIJbJ6pn8s",k="service_38razxb",y="template_aplhulr";function I(e){return e.replace(/[-\s]/g,"").toUpperCase()}async function m(e){const s=I(e),t=document.getElementById("kenteken-status"),n=document.getElementById("vehicle-info");if(s.length<4)return t.textContent="",t.className="kenteken-status",n.style.display="none",!1;try{t.textContent="⏳ Kenteken controleren...",t.className="kenteken-status checking";const o=await fetch(`https://opendata.rdw.nl/resource/m9d7-ebf2.json?kenteken=${s}`,{headers:{Accept:"application/json"}});if(!o.ok)throw new Error("API request failed");const i=await o.json();if(i&&i.length>0){if(l=i[0],t.textContent="✓ Kenteken gevonden in RDW",t.className="kenteken-status valid",document.getElementById("merk").textContent=l.merk||"Onbekend",document.getElementById("handelsbenaming").textContent=l.handelsbenaming||"Onbekend",l.datum_eerste_toelating){const a=l.datum_eerste_toelating,r=`${a.substring(6,8)}-${a.substring(4,6)}-${a.substring(0,4)}`;document.getElementById("datum_eerste_toelating").textContent=r}else document.getElementById("datum_eerste_toelating").textContent="Onbekend";return n.style.display="block",!0}else return t.textContent="✗ Kenteken niet gevonden in RDW database",t.className="kenteken-status invalid",n.style.display="none",l=null,!1}catch(o){return console.error("Error validating kenteken:",o),t.textContent="⚠ Fout bij het controleren van kenteken",t.className="kenteken-status error",n.style.display="none",!1}}function b(e,s){let t;return function(...o){const i=()=>{clearTimeout(t),e(...o)};clearTimeout(t),t=setTimeout(i,s)}}async function E(e){if(typeof emailjs>"u")throw new Error("EmailJS library not loaded");const s={name:e.naam,subject:e.onderwerp,email:e.email,phone:e.telefoon,license:e.kenteken,message:e.bericht};try{return{success:!0,response:await emailjs.send(k,y,s,w)}}catch(t){throw console.error("EmailJS Error:",t),t}}async function P(e){try{const s={id:Date.now().toString(),name:e.naam,email:e.email,phone:e.telefoon,kenteken:e.kenteken,subject:e.onderwerp,message:e.bericht,vehicleInfo:l?JSON.stringify(l):null,read:!1};try{const t=window.location.hostname==="m3hmet072.github.io"||window.location.hostname==="autoservicehoute.nl"?"https://autoservicehoute-production.up.railway.app/api":"http://localhost:3001/api";console.log("Attempting to save email to:",`${t}/emails`);const n=await fetch(`${t}/emails`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(console.log("API Response status:",n.status),!n.ok){const i=await n.text();throw console.error("API Error response:",i),new Error("API request failed")}const o=await n.json();console.log("Form data saved to database via API:",o)}catch(t){console.error("API save failed, falling back to localStorage:",t);const n=localStorage.getItem("ash_emails"),o=n?JSON.parse(n):[];o.unshift(s),localStorage.setItem("ash_emails",JSON.stringify(o)),console.log("Form data saved to localStorage (fallback)")}}catch(s){console.error("Error saving to dashboard:",s)}}function x(){const e=document.getElementById("contact-form"),s=document.getElementById("kenteken"),t=document.getElementById("submit-btn");if(!e||!s)return;const n=b(async o=>{await m(o)},500);s.addEventListener("input",o=>{n(o.target.value)}),e.addEventListener("submit",async o=>{o.preventDefault();const i=new FormData(e),a=Object.fromEntries(i.entries());if(!await m(a.kenteken)){c("Het ingevoerde kenteken is niet gevonden in de RDW database. Controleer het kenteken en probeer opnieuw.","error");return}t.disabled=!0,t.textContent="Verzenden...";try{if((await E(a)).success)await P(a),c("Uw bericht is succesvol verzonden! We nemen zo spoedig mogelijk contact met u op.","success"),e.reset(),l=null,document.getElementById("kenteken-status").textContent="",document.getElementById("vehicle-info").style.display="none";else throw new Error("Failed to send email")}catch(u){console.error("Error sending email:",u),c("Er is een fout opgetreden bij het verzenden van uw bericht. Probeer het later opnieuw of neem telefonisch contact met ons op.","error")}finally{t.disabled=!1,t.textContent="Versturen"}})}function A(){const e=navigator.userAgent;let s="Desktop",t="Unknown",n="Unknown",o="Unknown";if(e.includes("Windows NT 10.0"))o="Windows 10";else if(e.includes("Windows NT 6.3"))o="Windows 8.1";else if(e.includes("Windows NT 6.2"))o="Windows 8";else if(e.includes("Windows NT 6.1"))o="Windows 7";else if(e.includes("Mac OS X")){const i=e.match(/Mac OS X ([\d_]+)/);o=i?`macOS ${i[1].replace(/_/g,".")}`:"macOS"}else if(e.includes("Android")){const i=e.match(/Android ([\d.]+)/);o=i?`Android ${i[1]}`:"Android"}else if(e.includes("iOS")||e.includes("iPhone")||e.includes("iPad")){const i=e.match(/OS ([\d_]+)/);o=i?`iOS ${i[1].replace(/_/g,".")}`:"iOS"}else e.includes("Linux")&&(o="Linux");return e.includes("Chrome")&&!e.includes("Edg")?n="Chrome":e.includes("Safari")&&!e.includes("Chrome")?n="Safari":e.includes("Firefox")?n="Firefox":e.includes("Edg")?n="Edge":(e.includes("Opera")||e.includes("OPR"))&&(n="Opera"),e.includes("iPhone")?(s="Mobile",e.includes("iPhone15")?t="iPhone 15":e.includes("iPhone14")?t="iPhone 14":e.includes("iPhone13")?t="iPhone 13":e.includes("iPhone12")?t="iPhone 12":e.includes("iPhone11")?t="iPhone 11":e.includes("iPhone X")?t="iPhone X":t="iPhone"):e.includes("iPad")?(s="Tablet",t="iPad",e.includes("iPad Pro")?t="iPad Pro":e.includes("iPad Air")?t="iPad Air":e.includes("iPad Mini")&&(t="iPad Mini")):e.includes("Android")?(s=e.includes("Mobile")?"Mobile":"Tablet",e.includes("SM-S926")?t="Samsung Galaxy S24+":e.includes("SM-S921")?t="Samsung Galaxy S24":e.includes("SM-S928")?t="Samsung Galaxy S24 Ultra":e.includes("SM-S911")?t="Samsung Galaxy S23":e.includes("SM-S918")?t="Samsung Galaxy S23 Ultra":e.includes("SM-S901")?t="Samsung Galaxy S22":e.includes("SM-S908")?t="Samsung Galaxy S22 Ultra":e.includes("SM-G991")?t="Samsung Galaxy S21":e.includes("SM-G998")?t="Samsung Galaxy S21 Ultra":e.includes("SM-A")?t="Samsung Galaxy A Series":e.includes("Pixel 8")?t="Google Pixel 8":e.includes("Pixel 7")?t="Google Pixel 7":e.includes("Pixel 6")?t="Google Pixel 6":e.includes("Pixel")?t="Google Pixel":e.includes("OnePlus")?t="OnePlus":e.includes("Xiaomi")?t="Xiaomi":e.includes("Huawei")?t="Huawei":t="Android Device"):(s="Desktop",e.includes("Windows")?t="Windows PC":e.includes("Mac")?t="Mac":e.includes("Linux")?t="Linux PC":t="Desktop Computer"),{deviceType:s,deviceName:t,browser:n,os:o,screenResolution:`${window.screen.width}x${window.screen.height}`,viewport:`${window.innerWidth}x${window.innerHeight}`}}const L=1800*1e3,M=3e4;function _(){let e=localStorage.getItem("visitorId");return e||(e=`visitor_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,localStorage.setItem("visitorId",e)),e}function h(){const e=localStorage.getItem("lastActivity");return e?Date.now()-parseInt(e)>L:!0}function d(){localStorage.setItem("lastActivity",Date.now().toString())}function f(){if(h()){const s=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return localStorage.setItem("currentSessionId",s),localStorage.setItem("sessionStartTime",Date.now().toString()),d(),s}let e=localStorage.getItem("currentSessionId");return e||(e=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,localStorage.setItem("currentSessionId",e),localStorage.setItem("sessionStartTime",Date.now().toString())),d(),e}async function g(){try{const e=A(),s=_(),t=f(),n=h();(await v({...e,visitorId:s,sessionId:t,isNewSession:n})).success&&console.log("Visitor tracking initialized:",{visitorId:s,sessionId:t});const i=setInterval(()=>{const r=f();p(s,r).catch(console.error)},M),a=()=>d();["mousedown","keydown","scroll","touchstart"].forEach(r=>{document.addEventListener(r,a,{passive:!0})}),window.addEventListener("beforeunload",()=>{clearInterval(i)})}catch(e){console.error("Failed to initialize visitor tracking:",e)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",g):g();S();x();
